# ðŸš€ Ð Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð±ÐµÐ· Docker Hub

Ð•ÑÑ‚ÑŒ Ð½ÐµÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÐ¿Ð¾ÑÐ¾Ð±Ð¾Ð² Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ Ð±ÐµÐ· Ð½ÐµÐ¾Ð±Ñ…Ð¾Ð´Ð¸Ð¼Ð¾ÑÑ‚Ð¸ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð² Docker Hub:

## ðŸŽ¯ **Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1: GitHub Container Registry (GHCR) - Ð ÐµÐºÐ¾Ð¼ÐµÐ½Ð´ÑƒÐµÑ‚ÑÑ**

### âœ… **ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- Ð‘ÐµÑÐ¿Ð»Ð°Ñ‚Ð½Ð¾ Ð´Ð»Ñ Ð¿ÑƒÐ±Ð»Ð¸Ñ‡Ð½Ñ‹Ñ… Ñ€ÐµÐ¿Ð¾Ð·Ð¸Ñ‚Ð¾Ñ€Ð¸ÐµÐ²
- Ð˜Ð½Ñ‚ÐµÐ³Ñ€Ð°Ñ†Ð¸Ñ Ñ GitHub
- ÐÐµ Ð½ÑƒÐ¶Ð½Ñ‹ Ð´Ð¾Ð¿Ð¾Ð»Ð½Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚Ñ‹
- ÐÐ²Ñ‚Ð¾Ð¼Ð°Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¸Ðµ Ð¿Ñ€Ð°Ð²Ð° Ð´Ð¾ÑÑ‚ÑƒÐ¿Ð°

### ðŸ”§ **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°:**

1. **Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð² `docker-compose.prod.yml`:**
   ```yaml
   image: ghcr.io/YOUR_GITHUB_USERNAME/YOUR_REPO_NAME/homework-bot:latest
   ```
   ÐÐ° Ð²Ð°Ñˆ Ñ€ÐµÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð¿ÑƒÑ‚ÑŒ, Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€:
   ```yaml
   image: ghcr.io/alex/homework-bot/homework-bot:latest
   ```

2. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹Ñ‚Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐµÑ€Ð²ÐµÑ€Ð½Ñ‹Ðµ secrets:**
   - `SERVER_HOST` - IP ÑÐµÑ€Ð²ÐµÑ€Ð°
   - `SERVER_USER` - Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ SSH
   - `SERVER_SSH_KEY` - SSH ÐºÐ»ÑŽÑ‡

3. **ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð´Ð¾Ð±Ð°Ð²ÑŒÑ‚Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð´Ð»Ñ GHCR:**
   ```bash
   echo $GITHUB_TOKEN | docker login ghcr.io -u YOUR_GITHUB_USERNAME --password-stdin
   ```

### ðŸ“‹ **GitHub Secrets (Ñ‚Ð¾Ð»ÑŒÐºÐ¾ ÑÐµÑ€Ð²ÐµÑ€):**
```
SERVER_HOST=192.168.1.100
SERVER_USER=root
SERVER_SSH_KEY=-----BEGIN OPENSSH PRIVATE KEY-----...
```

---

## ðŸŽ¯ **Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2: ÐŸÑ€ÑÐ¼Ð¾Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ Ð½Ð° ÑÐµÑ€Ð²ÐµÑ€**

### âœ… **ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- ÐŸÐ¾Ð»Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾
- ÐÐµ Ð½ÑƒÐ¶ÐµÐ½ Ð½Ð¸ÐºÐ°ÐºÐ¾Ð¹ registry
- Ð‘Ñ‹ÑÑ‚Ñ€ÐµÐµ (Ð½ÐµÑ‚ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²)

### ðŸ”§ **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°:**

1. **Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ workflow `deploy-direct.yml`**
2. **Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ deploy workflow:**
   ```bash
   mv .github/workflows/deploy.yml .github/workflows/deploy-dockerhub.yml
   mv .github/workflows/deploy-direct.yml .github/workflows/deploy.yml
   ```

3. **ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ `docker-compose.direct.yml`:**
   ```bash
   cp docker-compose.direct.yml docker-compose.yml
   ```

### ðŸ“‹ **GitHub Secrets:**
```
SERVER_HOST=192.168.1.100
SERVER_USER=root
SERVER_SSH_KEY=-----BEGIN OPENSSH PRIVATE KEY-----...
```

---

## ðŸŽ¯ **Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 3: Ð‘ÐµÐ· Docker Ð²Ð¾Ð¾Ð±Ñ‰Ðµ**

### âœ… **ÐŸÑ€ÐµÐ¸Ð¼ÑƒÑ‰ÐµÑÑ‚Ð²Ð°:**
- ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ð¾
- Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ PM2
- ÐœÐµÐ½ÑŒÑˆÐµ Ñ€ÐµÑÑƒÑ€ÑÐ¾Ð²

### ðŸ”§ **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ°:**

1. **Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ workflow `deploy-simple.yml`**
2. **Ð—Ð°Ð¼ÐµÐ½Ð¸Ñ‚Ðµ Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ deploy workflow:**
   ```bash
   mv .github/workflows/deploy.yml .github/workflows/deploy-docker.yml
   mv .github/workflows/deploy-simple.yml .github/workflows/deploy.yml
   ```

3. **ÐÐ° ÑÐµÑ€Ð²ÐµÑ€Ðµ ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚Ðµ Node.js Ð¸ PM2:**
   ```bash
   # Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° Node.js
   curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
   apt-get install -y nodejs
   
   # Ð£ÑÑ‚Ð°Ð½Ð¾Ð²ÐºÐ° PM2
   npm install -g pm2
   ```

### ðŸ“‹ **GitHub Secrets:**
```
SERVER_HOST=192.168.1.100
SERVER_USER=root
SERVER_SSH_KEY=-----BEGIN OPENSSH PRIVATE KEY-----...
```

---

## ðŸš€ **Ð‘Ñ‹ÑÑ‚Ñ€Ñ‹Ð¹ Ð²Ñ‹Ð±Ð¾Ñ€:**

### **Ð”Ð»Ñ Ð½Ð¾Ð²Ð¸Ñ‡ÐºÐ¾Ð²:** Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 3 (Ð±ÐµÐ· Docker)
- ÐŸÑ€Ð¾Ñ‰Ðµ Ð²ÑÐµÐ³Ð¾ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¸Ñ‚ÑŒ
- ÐœÐµÐ½ÑŒÑˆÐµ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚ÐµÐ¹
- Ð‘Ñ‹ÑÑ‚Ñ€ÐµÐµ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ

### **Ð”Ð»Ñ Ð¿Ñ€Ð¾Ð´Ð²Ð¸Ð½ÑƒÑ‚Ñ‹Ñ…:** Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 1 (GHCR)
- Ð¡Ð¾Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¹ Ð¿Ð¾Ð´Ñ…Ð¾Ð´
- Ð›ÑƒÑ‡ÑˆÐ°Ñ Ð¸Ð·Ð¾Ð»ÑÑ†Ð¸Ñ
- Ð›ÐµÐ³Ñ‡Ðµ Ð¼Ð°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ

### **Ð”Ð»Ñ Ð¼Ð°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾Ð³Ð¾ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»Ñ:** Ð’Ð°Ñ€Ð¸Ð°Ð½Ñ‚ 2 (Ð¿Ñ€ÑÐ¼Ð¾Ðµ Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ðµ)
- ÐŸÐ¾Ð»Ð½Ñ‹Ð¹ ÐºÐ¾Ð½Ñ‚Ñ€Ð¾Ð»ÑŒ Ð½Ð°Ð´ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ¾Ð¼
- ÐÐµÑ‚ Ð·Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸ Ð¾Ñ‚ Ð²Ð½ÐµÑˆÐ½Ð¸Ñ… ÑÐµÑ€Ð²Ð¸ÑÐ¾Ð²

---

## ðŸ”§ **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° Ð»ÑŽÐ±Ð¾Ð³Ð¾ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð°:**

### 1. **ÐŸÐ¾Ð´Ð³Ð¾Ñ‚Ð¾Ð²ÐºÐ° ÑÐµÑ€Ð²ÐµÑ€Ð°:**
```bash
# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸ÑŽ
mkdir -p /opt/homework-bot/{temp,logs}
cd /opt/homework-bot

# Ð¡Ð¾Ð·Ð´Ð°Ð¹Ñ‚Ðµ .env Ñ„Ð°Ð¹Ð»
cat > .env << EOF
BOT_TOKEN=your_bot_token_here
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_MODEL=meta-llama/llama-3.1-8b-instruct:free
LOG_LEVEL=1
EOF
```

### 2. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° SSH ÐºÐ»ÑŽÑ‡ÐµÐ¹:**
```bash
# ÐÐ° Ð»Ð¾ÐºÐ°Ð»ÑŒÐ½Ð¾Ð¹ Ð¼Ð°ÑˆÐ¸Ð½Ðµ
ssh-keygen -t rsa -b 4096 -C "github-actions"
ssh-copy-id -i ~/.ssh/id_rsa.pub user@your-server
```

### 3. **ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ° GitHub Secrets:**
- `SERVER_HOST` - IP Ð¸Ð»Ð¸ Ð´Ð¾Ð¼ÐµÐ½ ÑÐµÑ€Ð²ÐµÑ€Ð°
- `SERVER_USER` - Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð´Ð»Ñ SSH
- `SERVER_SSH_KEY` - Ð¿Ñ€Ð¸Ð²Ð°Ñ‚Ð½Ñ‹Ð¹ SSH ÐºÐ»ÑŽÑ‡

### 4. **ÐŸÑ€Ð¾Ð²ÐµÑ€ÐºÐ°:**
```bash
# ÐŸÐ¾ÑÐ»Ðµ push Ð² main Ð¿Ñ€Ð¾Ð²ÐµÑ€ÑŒÑ‚Ðµ Actions
# Ð”Ð¾Ð»Ð¶ÐµÐ½ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒÑÑ workflow Ñ€Ð°Ð·Ð²ÐµÑ€Ñ‚Ñ‹Ð²Ð°Ð½Ð¸Ñ
```

---

## ðŸ“Š **Ð¡Ñ€Ð°Ð²Ð½ÐµÐ½Ð¸Ðµ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚Ð¾Ð²:**

| ÐšÑ€Ð¸Ñ‚ÐµÑ€Ð¸Ð¹ | GHCR | ÐŸÑ€ÑÐ¼Ð¾Ðµ | Ð‘ÐµÐ· Docker |
|----------|------|--------|------------|
| Ð¡Ð»Ð¾Ð¶Ð½Ð¾ÑÑ‚ÑŒ | Ð¡Ñ€ÐµÐ´Ð½ÑÑ | Ð¡Ñ€ÐµÐ´Ð½ÑÑ | ÐÐ¸Ð·ÐºÐ°Ñ |
| Ð¡ÐºÐ¾Ñ€Ð¾ÑÑ‚ÑŒ | Ð¡Ñ€ÐµÐ´Ð½ÑÑ | Ð‘Ñ‹ÑÑ‚Ñ€Ð°Ñ | ÐžÑ‡ÐµÐ½ÑŒ Ð±Ñ‹ÑÑ‚Ñ€Ð°Ñ |
| Ð˜Ð·Ð¾Ð»ÑÑ†Ð¸Ñ | Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ | Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ | ÐÐ¸Ð·ÐºÐ°Ñ |
| Ð ÐµÑÑƒÑ€ÑÑ‹ | Ð¡Ñ€ÐµÐ´Ð½Ð¸Ðµ | Ð¡Ñ€ÐµÐ´Ð½Ð¸Ðµ | ÐÐ¸Ð·ÐºÐ¸Ðµ |
| ÐœÐ°ÑÑˆÑ‚Ð°Ð±Ð¸Ñ€ÑƒÐµÐ¼Ð¾ÑÑ‚ÑŒ | Ð’Ñ‹ÑÐ¾ÐºÐ°Ñ | Ð¡Ñ€ÐµÐ´Ð½ÑÑ | ÐÐ¸Ð·ÐºÐ°Ñ |

**Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´ÑÑ‰Ð¸Ð¹ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚ Ð¸ ÑÐ»ÐµÐ´ÑƒÐ¹Ñ‚Ðµ Ð¸Ð½ÑÑ‚Ñ€ÑƒÐºÑ†Ð¸ÑÐ¼!** ðŸŽ¯

---

## ðŸ¤– **ÐžÑÐ¾Ð±ÐµÐ½Ð½Ð¾ÑÑ‚Ð¸ Homework Bot:**

### **Ð—Ð°Ð²Ð¸ÑÐ¸Ð¼Ð¾ÑÑ‚Ð¸:**
- **Puppeteer** Ð´Ð»Ñ Ñ€ÐµÐ½Ð´ÐµÑ€Ð¸Ð½Ð³Ð° LaTeX Ð¸ Markdown
- **Chromium** Ð´Ð»Ñ Ð³ÐµÐ½ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹
- **Ð’Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹** Ð´Ð»Ñ Ñ…Ñ€Ð°Ð½ÐµÐ½Ð¸Ñ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹

### **ÐŸÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ð¾ÐºÑ€ÑƒÐ¶ÐµÐ½Ð¸Ñ:**
- `BOT_TOKEN` - Ñ‚Ð¾ÐºÐµÐ½ Telegram Ð±Ð¾Ñ‚Ð°
- `OPENROUTER_API_KEY` - ÐºÐ»ÑŽÑ‡ API OpenRouter
- `OPENROUTER_MODEL` - Ð¼Ð¾Ð´ÐµÐ»ÑŒ Ð½ÐµÐ¹Ñ€Ð¾ÑÐµÑ‚Ð¸ (Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ: meta-llama/llama-3.1-8b-instruct:free)
- `LOG_LEVEL` - ÑƒÑ€Ð¾Ð²ÐµÐ½ÑŒ Ð»Ð¾Ð³Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ (0-3, Ð¿Ð¾ ÑƒÐ¼Ð¾Ð»Ñ‡Ð°Ð½Ð¸ÑŽ: 1)
- `LOG_DIR` - Ð´Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ñ Ð´Ð»Ñ Ð»Ð¾Ð³Ð¾Ð²

### **Ð”Ð¸Ñ€ÐµÐºÑ‚Ð¾Ñ€Ð¸Ð¸:**
- `/app/temp` - Ð²Ñ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ð¹
- `/app/logs` - Ñ„Ð°Ð¹Ð»Ñ‹ Ð»Ð¾Ð³Ð¾Ð²

### **Ð ÐµÑÑƒÑ€ÑÑ‹:**
- ÐœÐ¸Ð½Ð¸Ð¼ÑƒÐ¼ 1GB RAM
- 500MB Ð´Ð¸ÑÐºÐ¾Ð²Ð¾Ð³Ð¾ Ð¿Ñ€Ð¾ÑÑ‚Ñ€Ð°Ð½ÑÑ‚Ð²Ð°
- ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Ðº Ð¸Ð½Ñ‚ÐµÑ€Ð½ÐµÑ‚Ñƒ Ð´Ð»Ñ API OpenRouter
