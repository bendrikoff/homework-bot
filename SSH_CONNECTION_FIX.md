# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ SSH –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

## üö® –ü—Ä–æ–±–ª–µ–º–∞
```
Error: can't connect without a private SSH key or password
```

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ GitHub Actions –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É —á–µ—Ä–µ–∑ SSH.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ GitHub Secrets

–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ **–í–°–ï** –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ secrets –¥–æ–±–∞–≤–ª–µ–Ω—ã:

```
SERVER_HOST     - IP –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ ‚úÖ
SERVER_USER     - SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚úÖ  
SERVER_PASSWORD - –ü–∞—Ä–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ ‚úÖ
SERVER_PORT     - SSH –ø–æ—Ä—Ç (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) ‚úÖ
```

### 2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –¥–æ—Å—Ç—É–ø —Å –≤–∞—à–µ–π –º–∞—à–∏–Ω—ã

```bash
# –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
ssh SERVER_USER@SERVER_HOST

# –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å –ø–∞—Ä–æ–ª–µ–º:
ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no SERVER_USER@SERVER_HOST

# –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ—Ä—Ç–∞:
ssh -p 22 SERVER_USER@SERVER_HOST
```

### 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSH —Å–µ—Ä–≤–µ—Ä–∞

```bash
# SSH –Ω–∞ —Å–µ—Ä–≤–µ—Ä –ª—é–±—ã–º —Å–ø–æ—Å–æ–±–æ–º
ssh SERVER_USER@SERVER_HOST

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ SSH
sudo nano /etc/ssh/sshd_config
```

**–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤–∫–ª—é—á–µ–Ω—ã —ç—Ç–∏ –æ–ø—Ü–∏–∏:**
```
PasswordAuthentication yes
PermitRootLogin yes (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ root)
Port 22
```

**–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å SSH –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```bash
sudo systemctl restart sshd
sudo systemctl status sshd
```

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### üîë **–†–µ—à–µ–Ω–∏–µ 1: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Å –ø–∞—Ä–æ–ª–µ–º**

–Ø –æ–±–Ω–æ–≤–∏–ª `deploy.yml` —Å –ª—É—á—à–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—É—Å—Ç—ã–µ –∫–ª—é—á–∏ SSH (`key: ""`)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω—ã —Ç–∞–π–º–∞—É—Ç—ã  
- ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ host keys
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω —Å–µ–π—á–∞—Å.**

### üîê **–†–µ—à–µ–Ω–∏–µ 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSH –∫–ª—é—á–∏ (–ù–∞–¥–µ–∂–Ω–æ)**

–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ –ø–∞–π–ø–ª–∞–π–Ω —Å SSH –∫–ª—é—á–∞–º–∏:

```bash
# –ü–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª—ã:
# deploy.yml ‚Üí deploy-password.yml
# deploy-with-key.yml ‚Üí deploy.yml
```

**–¢—Ä–µ–±—É—é—Ç—Å—è —ç—Ç–∏ GitHub Secrets:**
```
SERVER_HOST     - IP —Å–µ—Ä–≤–µ—Ä–∞
SERVER_USER     - SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
SERVER_SSH_KEY  - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á
```

**–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å SSH –∫–ª—é—á:**
```bash
# –ù–∞ –≤–∞—à–µ–π –º–∞—à–∏–Ω–µ
ssh-keygen -t rsa -b 4096 -C "github-actions"

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä
ssh-copy-id SERVER_USER@SERVER_HOST

# –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è GitHub
cat ~/.ssh/id_rsa
```

#### –®–∞–≥–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è SSH –∫–ª—é—á–µ–π:

1. **–°–æ–∑–¥–∞–π—Ç–µ SSH –∫–ª—é—á** (–≤—ã–ø–æ–ª–Ω–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ)
2. **–î–æ–±–∞–≤—å—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –Ω–∞ —Å–µ—Ä–≤–µ—Ä** (`ssh-copy-id`)
3. **–î–æ–±–∞–≤—å—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á –≤ GitHub Secrets** (`SERVER_SSH_KEY`)
4. **–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ `deploy-with-key.yml`**

### üîÑ **–†–µ—à–µ–Ω–∏–µ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ**

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞
ping SERVER_IP_ADDRESS

# –ü—Ä–æ–≤–µ—Ä–∫–∞ SSH –ø–æ—Ä—Ç–∞
telnet SERVER_IP_ADDRESS 22
# –∏–ª–∏
nc -zv SERVER_IP_ADDRESS 22

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–ª–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
sudo ufw status
```

### üîß **–†–µ—à–µ–Ω–∏–µ 4: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**

–ú–Ω–æ–≥–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–µ—à–∞—é—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º root:

```bash
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ root:
SERVER_USER     = root
SERVER_PASSWORD = root-password
```

## üö® –ß–∞—Å—Ç—ã–µ –ø—Ä–∏—á–∏–Ω—ã –æ—à–∏–±–æ–∫

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π IP –∞–¥—Ä–µ—Å
- –î–≤–æ–π–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ IP —Å–µ—Ä–≤–µ—Ä–∞
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π IP –¥–ª—è –ø–ª–∞—Ç–Ω—ã—Ö VPS
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø

### ‚ùå –§–∞–π—Ä–≤–æ–ª–ª –±–ª–æ–∫–∏—Ä—É–µ—Ç SSH
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–∞–∑—Ä–µ—à–∏—Ç–µ SSH:
sudo ufw allow ssh
sudo ufw allow 22
sudo ufw reload
```

### ‚ùå SSH —Å–ª—É–∂–±–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞
```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ:
sudo systemctl start sshd
sudo systemctl enable sshd
sudo systemctl status sshd
```

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ –∫–∞–∫–æ–º –ø–æ—Ä—Ç—É —Ä–∞–±–æ—Ç–∞–µ—Ç SSH: `sudo netstat -tlnp | grep ssh`
- –ï—Å–ª–∏ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ä—Ç, –¥–æ–±–∞–≤—å—Ç–µ `SERVER_PORT = –≤–∞—à_–ø–æ—Ä—Ç`

### ‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- –î–ª—è Ubuntu VPS –æ–±—ã—á–Ω–æ: `ubuntu`
- –î–ª—è CentOS VPS –æ–±—ã—á–Ω–æ: `centos` –∏–ª–∏ `root`
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞: `root`

## üîç –û—Ç–ª–∞–¥–∫–∞

### –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ SSH:

```bash
# –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º:
ssh -vvv SERVER_USER@SERVER_HOST

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –ø–∞—Ä–æ–ª—è (–Ω–µ –∫–ª—é—á–µ–π):
ssh -o PreferredAuthentications=password -o PubkeyAuthentication=no SERVER_USER@SERVER_HOST
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ GitHub Actions –ª–æ–≥–æ–≤:

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ **GitHub ‚Üí Actions**
2. –ù–∞–π–¥–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫ workflow
3. –†–∞—Å–∫—Ä–æ–π—Ç–µ —à–∞–≥ —Å –æ—à–∏–±–∫–æ–π
4. –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### ‚úÖ **–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:**
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ SSH —Ä–∞–∑—Ä–µ—à–∞–µ—Ç **PasswordAuthentication yes**
3. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `deploy.yml`

### ‚úÖ **–î–ª—è –Ω–∞–¥–µ–∂–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è:**
1. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ **SSH –∫–ª—é—á–∏**  
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `deploy-with-key.yml`
3. –≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ª—É—á—à—É—é –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ **–î–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–µ—Ç–µ–π:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **—Ñ–∞–π—Ä–≤–æ–ª–ª –∏ NAT**
2. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ **–ø–æ—Ä—Ç 22 –æ—Ç–∫—Ä—ã—Ç**
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–Ω–µ—à–Ω–∏–π IP –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

## üìû –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç

1. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–∏–µ GitHub Actions:**
   - `deploy-simple-backup.yml` (PM2)
   - `deploy-with-key.yml` (SSH –∫–ª—é—á–∏)
   - `deploy-pm2.yml` (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π)

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Telnet/SSH –∫–ª–∏–µ–Ω—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
   - –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä
   - –û–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ –ø–æ–¥–¥–µ—Ä–∂–∫–µ —Å–µ—Ä–≤–µ—Ä–∞

3. **–°–æ–∑–¥–∞–π—Ç–µ Issue —Å –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç—è–º–∏:**
   - –ö–∞–∫–æ–π –ø–∞–π–ø–ª–∞–π–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
   - –ö–∞–∫–∏–µ –æ—à–∏–±–∫–∏ –≤–∏–¥–∏—Ç–µ
   - –° –∫–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (VPS, –ª–æ–∫–∞–ª—å–Ω—ã–π, –æ–±–ª–∞—á–Ω—ã–π)

**–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π `deploy.yml` - –æ–Ω –¥–æ–ª–∂–µ–Ω —Ä–µ—à–∏—Ç—å –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–±–ª–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è!** üîß
