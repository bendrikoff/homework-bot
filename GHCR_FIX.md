# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∏ GHCR –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## üö® –ü—Ä–æ–±–ª–µ–º–∞
```
denied: installation not allowed to Create organization package
```

–≠—Ç–∞ –æ—à–∏–±–∫–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –∫–æ–≥–¥–∞ GitHub Actions –ø—ã—Ç–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å Docker –ø–∞–∫–µ—Ç –≤ GitHub Container Registry, –Ω–æ —É –Ω–µ–≥–æ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø—Ä–∞–≤.

## ‚úÖ –†–µ—à–µ–Ω–∏—è

### üéØ **–†–µ—à–µ–Ω–∏–µ 1: Docker –±–µ–∑ GHCR (–ê–ö–¢–ò–í–ù–û)**

–ò–∑–º–µ–Ω–∏–ª–∏ –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–π–ø–ª–∞–π–Ω –Ω–∞ `deploy-direct.yml`, –∫–æ—Ç–æ—Ä—ã–π:
- ‚úÖ –°–æ–±–∏—Ä–∞–µ—Ç Docker –æ–±—Ä–∞–∑ –ø—Ä—è–º–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- ‚úÖ –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç GitHub Container Registry
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫

**–¢–µ–∫—É—â–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π –ø–∞–π–ø–ª–∞–π–Ω: `deploy.yml` ‚Üí Docker Direct**

### üîß **–†–µ—à–µ–Ω–∏–µ 2: PM2 —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (–ó–∞–ø–∞—Å–Ω–æ–µ)**

–ï—Å–ª–∏ Docker –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø—Ä–æ—Å—Ç–æ–π –ø–∞–π–ø–ª–∞–π–Ω:

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ PM2 —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
mv .github/workflows deployment .github/workflows/deploy-docker.yml
mv .github/workflows/deploy-simple-backup.yml .github/workflows/deploy.yml
```

–ò–ª–∏ –ø–µ—Ä–µ–∏–º–µ–Ω—É–π—Ç–µ —Ñ–∞–π–ª—ã:
- `deploy-simple-backup.yml` ‚Üí `deploy.yml`
- –°—Ç–∞—Ä—ã–π `deploy.yml` ‚Üí `deploy-docker.yml`

### üîê **–†–µ—à–µ–Ω–∏–µ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GHCR –ø—Ä–∞–≤ (–î–ª—è –æ–ø—ã—Ç–Ω—ã—Ö)**

–ï—Å–ª–∏ –≤—Å–µ-—Ç–∞–∫–∏ —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å GHCR:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**
   ```
   GitHub ‚Üí Settings ‚Üí Actions ‚Üí General
   ```
   –í —Ä–∞–∑–¥–µ–ª–µ "Workflow permissions":
   - ‚úÖ "Read and write permissions"
   - ‚úÖ "Allow GitHub Actions to create and approve pull requests"

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∞ Packages:**
   ```
   GitHub ‚Üí Settings ‚Üí Actions ‚Üí General ‚Üí Workflow permissions
   ```
   - ‚úÖ "Read packages"
   - ‚úÖ "Write packages"

3. **–í–∫–ª—é—á–∏—Ç–µ GHCR –ø–∞–π–ø–ª–∞–π–Ω:**
   ```bash
   mv .github/workflows/deploy-ghcr.yml.disabled .github/workflows/deploy-ghcr.yml
   ```

## ü§∫ **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**

### ‚úÖ **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ Docker Direct (—Ç–µ–∫—É—â–∏–π)**
- –†–∞–±–æ—Ç–∞–µ—Ç —Å—Ä–∞–∑—É –±–µ–∑ –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ü–æ–ª–Ω–∞—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è
- –ò–∑–æ–ª—è—Ü–∏—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

### ‚úÖ **–ï—Å–ª–∏ Docker –ø—Ä–æ–±–ª–µ–º—ã - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ PM2**
- –°–∞–º—ã–π –Ω–∞–¥–µ–∂–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –ª—é–±–æ–º —Å–µ—Ä–≤–µ—Ä–µ

### ‚ùå **–ò–∑–±–µ–≥–∞–π GHCR –ø–æ–∫–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç–µ –ø—Ä–∞–≤–∞**
- –¢—Ä–µ–±—É–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–π–∫—É
- –ú–æ–∂–µ—Ç –≤—ã–∑—ã–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

## üîß –ü–æ–ª–Ω–∞—è —Å—Ö–µ–º–∞ –ø–∞–π–ø–ª–∞–π–Ω–æ–≤

| –§–∞–π–ª | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|--------|----------|
| `deploy.yml` | ‚úÖ **–ê–ö–¢–ò–í–ù–´–ô** | Docker Direct —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ |
| `deploy-simple-backup.yml` | üì¶ –ó–∞–ø–∞—Å–Ω–æ–π | PM2 –ø—Ä–æ—Å—Ç–æ–π —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ |
| `deploy-ghcr.yml.disabled` | ‚ùå –û—Ç–∫–ª—é—á–µ–Ω | GHCR —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ |
| `deploy-pm2.yml` | üì¶ –ó–∞–ø–∞—Å–Ω–æ–π | –°—Ç–∞—Ä—ã–π PM2 —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ |

## üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –ø–∞–π–ø–ª–∞–π–Ω —Ç–µ–ø–µ—Ä—å:

1. **–°–æ–±–∏—Ä–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç** —Å `npm run build`
2. **–°–æ–∑–¥–∞–µ—Ç –∞—Ä—Ö–∏–≤** —Å Docker —Ñ–∞–π–ª–∞–º–∏
3. **–ó–∞–≥—Ä—É–∂–∞–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä** —á–µ—Ä–µ–∑ SCP
4. **–£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Docker** –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
5. **–°–æ–±–∏—Ä–∞–µ—Ç –æ–±—Ä–∞–∑** –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
6. **–ó–∞–ø—É—Å–∫–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** —Å Docker Compose

**–ù–∏–∫–∞–∫–∏—Ö –≤–Ω–µ—à–Ω–∏—Ö registries –∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞!** üéâ

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
ssh root@your-server
cd /opt/homework-bot

# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker ps | grep homework-bot
docker-compose logs -f

# –ò–ª–∏ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è PM2:
pm2 status
pm2 logs homework-bot
```

**–ü—Ä–æ–±–ª–µ–º–∞ GHCR —Ä–µ—à–µ–Ω–∞! –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ç–µ–∫—É—â–∏–π Docker Direct –ø–∞–π–ø–ª–∞–π–Ω.** ‚úÖ
